(this["webpackJsonpreact-demo"]=this["webpackJsonpreact-demo"]||[]).push([[0],{29:function(t,e,i){},31:function(t,e,i){"use strict";i.r(e);var n=i(7),r=i(20),a=i.n(r),o=i(12),s=i.n(o),l=i(16),u=i(9),c=i(21),h=i(1),d=i(0),f=i(4),p=i(5),v=i(22),m=i(13),b=i(10),y=i(2),N=i(3),g=i(17),O=i.n(g);var k,j=function(t,e){return t(e={exports:{}},e.exports),e.exports}((function(t,e){window,t.exports=function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){t.exports=i(1)},function(t,e,i){var n;i.r(e),i.d(e,"ParentBlot",(function(){return j})),i.d(e,"ContainerBlot",(function(){return x})),i.d(e,"LeafBlot",(function(){return w})),i.d(e,"EmbedBlot",(function(){return P})),i.d(e,"ScrollBlot",(function(){return z})),i.d(e,"BlockBlot",(function(){return M})),i.d(e,"InlineBlot",(function(){return q})),i.d(e,"TextBlot",(function(){return K})),i.d(e,"Attributor",(function(){return C})),i.d(e,"ClassAttributor",(function(){return L})),i.d(e,"StyleAttributor",(function(){return I})),i.d(e,"AttributorStore",(function(){return _})),i.d(e,"Registry",(function(){return s})),i.d(e,"Scope",(function(){return r})),function(t){t[t.TYPE=3]="TYPE",t[t.LEVEL=12]="LEVEL",t[t.ATTRIBUTE=13]="ATTRIBUTE",t[t.BLOT=14]="BLOT",t[t.INLINE=7]="INLINE",t[t.BLOCK=11]="BLOCK",t[t.BLOCK_BLOT=10]="BLOCK_BLOT",t[t.INLINE_BLOT=6]="INLINE_BLOT",t[t.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",t[t.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",t[t.ANY=15]="ANY"}(n||(n={}));var r=n,a=function(){function t(){Object(y.a)(this,t),this.head=null,this.tail=null,this.length=0}return Object(N.a)(t,[{key:"append",value:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];if(this.insertBefore(e[0],null),e.length>1){var n=e.slice(1);this.append.apply(this,Object(b.a)(n))}}},{key:"at",value:function(t){for(var e=this.iterator(),i=e();i&&t>0;)t-=1,i=e();return i}},{key:"contains",value:function(t){for(var e=this.iterator(),i=e();i;){if(i===t)return!0;i=e()}return!1}},{key:"indexOf",value:function(t){for(var e=this.iterator(),i=e(),n=0;i;){if(i===t)return n;n+=1,i=e()}return-1}},{key:"insertBefore",value:function(t,e){null!=t&&(this.remove(t),t.next=e,null!=e?(t.prev=e.prev,null!=e.prev&&(e.prev.next=t),e.prev=t,e===this.head&&(this.head=t)):null!=this.tail?(this.tail.next=t,t.prev=this.tail,this.tail=t):(t.prev=null,this.head=this.tail=t),this.length+=1)}},{key:"offset",value:function(t){for(var e=0,i=this.head;null!=i;){if(i===t)return e;e+=i.length(),i=i.next}return-1}},{key:"remove",value:function(t){this.contains(t)&&(null!=t.prev&&(t.prev.next=t.next),null!=t.next&&(t.next.prev=t.prev),t===this.head&&(this.head=t.next),t===this.tail&&(this.tail=t.prev),this.length-=1)}},{key:"iterator",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.head;return function(){var e=t;return null!=t&&(t=t.next),e}}},{key:"find",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.iterator(),n=i();n;){var r=n.length();if(t<r||e&&t===r&&(null==n.next||0!==n.next.length()))return[n,t];t-=r,n=i()}return[null,0]}},{key:"forEach",value:function(t){for(var e=this.iterator(),i=e();i;)t(i),i=e()}},{key:"forEachAt",value:function(t,e,i){if(!(e<=0))for(var n=this.find(t),r=Object(m.a)(n,2),a=r[0],o=t-r[1],s=this.iterator(a),l=s();l&&o<t+e;){var u=l.length();t>o?i(l,t-o,Math.min(e,o+u-t)):i(l,0,Math.min(u,t+e-o)),o+=u,l=s()}}},{key:"map",value:function(t){return this.reduce((function(e,i){return e.push(t(i)),e}),[])}},{key:"reduce",value:function(t,e){for(var i=this.iterator(),n=i();n;)e=t(e,n),n=i();return e}}]),t}(),o=function(t){Object(f.a)(i,t);var e=Object(p.a)(i);function i(t){var n;return Object(y.a)(this,i),(n=e.call(this,t="[Parchment] "+t)).message=t,n.name=n.constructor.name,n}return i}(Object(v.a)(Error)),s=function(){function t(){Object(y.a)(this,t),this.attributes={},this.classes={},this.tags={},this.types={}}return Object(N.a)(t,[{key:"create",value:function(e,i,n){var r=this.query(i);if(null==r)throw new o("Unable to create ".concat(i," blot"));var a=r,s=i instanceof Node||i.nodeType===Node.TEXT_NODE?i:a.create(n),l=new a(e,s,n);return t.blots.set(l.domNode,l),l}},{key:"find",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t.find(e,i)}},{key:"query",value:function(t){var e,i=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.ANY;return"string"==typeof t?e=this.types[t]||this.attributes[t]:t instanceof Text||t.nodeType===Node.TEXT_NODE?e=this.types.text:"number"==typeof t?t&r.LEVEL&r.BLOCK?e=this.types.block:t&r.LEVEL&r.INLINE&&(e=this.types.inline):t instanceof HTMLElement&&((t.getAttribute("class")||"").split(/\s+/).some((function(t){return!!(e=i.classes[t])})),e=e||this.tags[t.tagName]),null==e?null:n&r.LEVEL&e.scope&&n&r.TYPE&e.scope?e:null}},{key:"register",value:function(){for(var t=this,e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];if(i.length>1)return i.map((function(e){return t.register(e)}));var r=i[0];if("string"!=typeof r.blotName&&"string"!=typeof r.attrName)throw new o("Invalid definition");if("abstract"===r.blotName)throw new o("Cannot register abstract class");return this.types[r.blotName||r.attrName]=r,"string"==typeof r.keyName?this.attributes[r.keyName]=r:(null!=r.className&&(this.classes[r.className]=r),null!=r.tagName&&(Array.isArray(r.tagName)?r.tagName=r.tagName.map((function(t){return t.toUpperCase()})):r.tagName=r.tagName.toUpperCase(),(Array.isArray(r.tagName)?r.tagName:[r.tagName]).forEach((function(e){null!=t.tags[e]&&null!=r.className||(t.tags[e]=r)})))),r}}],[{key:"find",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return null==t?null:this.blots.has(t)?this.blots.get(t)||null:e?this.find(t.parentNode,e):null}}]),t}();s.blots=new WeakMap;var l=function(){function t(e,i){Object(y.a)(this,t),this.scroll=e,this.domNode=i,s.blots.set(i,this),this.prev=null,this.next=null}return Object(N.a)(t,[{key:"statics",get:function(){return this.constructor}},{key:"attach",value:function(){}},{key:"clone",value:function(){var t=this.domNode.cloneNode(!1);return this.scroll.create(t)}},{key:"detach",value:function(){null!=this.parent&&this.parent.removeChild(this),s.blots.delete(this.domNode)}},{key:"deleteAt",value:function(t,e){this.isolate(t,e).remove()}},{key:"formatAt",value:function(t,e,i,n){var a=this.isolate(t,e);if(null!=this.scroll.query(i,r.BLOT)&&n)a.wrap(i,n);else if(null!=this.scroll.query(i,r.ATTRIBUTE)){var o=this.scroll.create(this.statics.scope);a.wrap(o),o.format(i,n)}}},{key:"insertAt",value:function(t,e,i){var n=null==i?this.scroll.create("text",e):this.scroll.create(e,i),r=this.split(t);this.parent.insertBefore(n,r||void 0)}},{key:"isolate",value:function(t,e){var i=this.split(t);if(null==i)throw new Error("Attempt to isolate at end");return i.split(e),i}},{key:"length",value:function(){return 1}},{key:"offset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parent;return null==this.parent||this===t?0:this.parent.children.offset(this)+this.parent.offset(t)}},{key:"optimize",value:function(t){!this.statics.requiredContainer||this.parent instanceof this.statics.requiredContainer||this.wrap(this.statics.requiredContainer.blotName)}},{key:"remove",value:function(){null!=this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}},{key:"replaceWith",value:function(t,e){var i="string"==typeof t?this.scroll.create(t,e):t;return null!=this.parent&&(this.parent.insertBefore(i,this.next||void 0),this.remove()),i}},{key:"split",value:function(t,e){return 0===t?this:this.next}},{key:"update",value:function(t,e){}},{key:"wrap",value:function(t,e){var i="string"==typeof t?this.scroll.create(t,e):t;if(null!=this.parent&&this.parent.insertBefore(i,this.next||void 0),"function"!=typeof i.appendChild)throw new o("Cannot wrap ".concat(t));return i.appendChild(this),i}}],[{key:"create",value:function(t){if(null==this.tagName)throw new o("Blot definition missing tagName");var e;return Array.isArray(this.tagName)?("string"==typeof t&&(t=t.toUpperCase(),parseInt(t,10).toString()===t&&(t=parseInt(t,10))),e="number"==typeof t?document.createElement(this.tagName[t-1]):this.tagName.indexOf(t)>-1?document.createElement(t):document.createElement(this.tagName[0])):e=document.createElement(this.tagName),this.className&&e.classList.add(this.className),e}}]),t}();l.blotName="abstract";var g=l;function O(t,e){var i=e.find(t);if(null==i)try{i=e.create(t)}catch(n){i=e.create(r.INLINE),Array.from(t.childNodes).forEach((function(t){i.domNode.appendChild(t)})),t.parentNode&&t.parentNode.replaceChild(i.domNode,t),i.attach()}return i}var k=function(t){Object(f.a)(i,t);var e=Object(p.a)(i);function i(t,n){var r;return Object(y.a)(this,i),(r=e.call(this,t,n)).uiNode=null,r.build(),r}return Object(N.a)(i,[{key:"appendChild",value:function(t){this.insertBefore(t)}},{key:"attach",value:function(){Object(h.a)(Object(d.a)(i.prototype),"attach",this).call(this),this.children.forEach((function(t){t.attach()}))}},{key:"attachUI",value:function(t){null!=this.uiNode&&this.uiNode.remove(),this.uiNode=t,i.uiClass&&this.uiNode.classList.add(i.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}},{key:"build",value:function(){var t=this;this.children=new a,Array.from(this.domNode.childNodes).filter((function(e){return e!==t.uiNode})).reverse().forEach((function(e){try{var i=O(e,t.scroll);t.insertBefore(i,t.children.head||void 0)}catch(e){if(e instanceof o)return;throw e}}))}},{key:"deleteAt",value:function(t,e){if(0===t&&e===this.length())return this.remove();this.children.forEachAt(t,e,(function(t,e,i){t.deleteAt(e,i)}))}},{key:"descendant",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.children.find(e),r=Object(m.a)(n,2),a=r[0],o=r[1];return null==t.blotName&&t(a)||null!=t.blotName&&a instanceof t?[a,o]:a instanceof i?a.descendant(t,o):[null,-1]}},{key:"descendants",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.MAX_VALUE,r=[],a=n;return this.children.forEachAt(e,n,(function(e,n,o){(null==t.blotName&&t(e)||null!=t.blotName&&e instanceof t)&&r.push(e),e instanceof i&&(r=r.concat(e.descendants(t,n,a))),a-=o})),r}},{key:"detach",value:function(){this.children.forEach((function(t){t.detach()})),Object(h.a)(Object(d.a)(i.prototype),"detach",this).call(this)}},{key:"enforceAllowedChildren",value:function(){var t=this,e=!1;this.children.forEach((function(n){e||t.statics.allowedChildren.some((function(t){return n instanceof t}))||(n.statics.scope===r.BLOCK_BLOT?(null!=n.next&&t.splitAfter(n),null!=n.prev&&t.splitAfter(n.prev),n.parent.unwrap(),e=!0):n instanceof i?n.unwrap():n.remove())}))}},{key:"formatAt",value:function(t,e,i,n){this.children.forEachAt(t,e,(function(t,e,r){t.formatAt(e,r,i,n)}))}},{key:"insertAt",value:function(t,e,i){var n=this.children.find(t),r=Object(m.a)(n,2),a=r[0],o=r[1];if(a)a.insertAt(o,e,i);else{var s=null==i?this.scroll.create("text",e):this.scroll.create(e,i);this.appendChild(s)}}},{key:"insertBefore",value:function(t,e){null!=t.parent&&t.parent.children.remove(t);var i=null;this.children.insertBefore(t,e||null),t.parent=this,null!=e&&(i=e.domNode),this.domNode.parentNode===t.domNode&&this.domNode.nextSibling===i||this.domNode.insertBefore(t.domNode,i),t.attach()}},{key:"length",value:function(){return this.children.reduce((function(t,e){return t+e.length()}),0)}},{key:"moveChildren",value:function(t,e){this.children.forEach((function(i){t.insertBefore(i,e)}))}},{key:"optimize",value:function(t){if(Object(h.a)(Object(d.a)(i.prototype),"optimize",this).call(this,t),this.enforceAllowedChildren(),null!=this.uiNode&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),0===this.children.length)if(null!=this.statics.defaultChild){var e=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(e)}else this.remove()}},{key:"path",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.children.find(t,e),r=Object(m.a)(n,2),a=r[0],o=r[1],s=[[this,t]];return a instanceof i?s.concat(a.path(o,e)):(null!=a&&s.push([a,o]),s)}},{key:"removeChild",value:function(t){this.children.remove(t)}},{key:"replaceWith",value:function(t,e){var n="string"==typeof t?this.scroll.create(t,e):t;return n instanceof i&&this.moveChildren(n),Object(h.a)(Object(d.a)(i.prototype),"replaceWith",this).call(this,n)}},{key:"split",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e){if(0===t)return this;if(t===this.length())return this.next}var i=this.clone();return this.parent&&this.parent.insertBefore(i,this.next||void 0),this.children.forEachAt(t,this.length(),(function(t,n,r){var a=t.split(n,e);null!=a&&i.appendChild(a)})),i}},{key:"splitAfter",value:function(t){for(var e=this.clone();null!=t.next;)e.appendChild(t.next);return this.parent&&this.parent.insertBefore(e,this.next||void 0),e}},{key:"unwrap",value:function(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}},{key:"update",value:function(t,e){var i=this,n=[],r=[];t.forEach((function(t){t.target===i.domNode&&"childList"===t.type&&(n.push.apply(n,Object(b.a)(t.addedNodes)),r.push.apply(r,Object(b.a)(t.removedNodes)))})),r.forEach((function(t){if(!(null!=t.parentNode&&"IFRAME"!==t.tagName&&document.body.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var e=i.scroll.find(t);null!=e&&(null!=e.domNode.parentNode&&e.domNode.parentNode!==i.domNode||e.detach())}})),n.filter((function(t){return t.parentNode===i.domNode||t===i.uiNode})).sort((function(t,e){return t===e?0:t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1})).forEach((function(t){var e=null;null!=t.nextSibling&&(e=i.scroll.find(t.nextSibling));var n=O(t,i.scroll);n.next===e&&null!=n.next||(null!=n.parent&&n.parent.removeChild(i),i.insertBefore(n,e||void 0))})),this.enforceAllowedChildren()}}]),i}(g);k.uiClass="";var j=k,A=function(t){Object(f.a)(i,t);var e=Object(p.a)(i);function i(){return Object(y.a)(this,i),e.apply(this,arguments)}return Object(N.a)(i,[{key:"checkMerge",value:function(){return null!==this.next&&this.next.statics.blotName===this.statics.blotName}},{key:"deleteAt",value:function(t,e){Object(h.a)(Object(d.a)(i.prototype),"deleteAt",this).call(this,t,e),this.enforceAllowedChildren()}},{key:"formatAt",value:function(t,e,n,r){Object(h.a)(Object(d.a)(i.prototype),"formatAt",this).call(this,t,e,n,r),this.enforceAllowedChildren()}},{key:"insertAt",value:function(t,e,n){Object(h.a)(Object(d.a)(i.prototype),"insertAt",this).call(this,t,e,n),this.enforceAllowedChildren()}},{key:"optimize",value:function(t){Object(h.a)(Object(d.a)(i.prototype),"optimize",this).call(this,t),this.children.length>0&&null!=this.next&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}}]),i}(j);A.blotName="container",A.scope=r.BLOCK_BLOT;var x=A,E=function(t){Object(f.a)(i,t);var e=Object(p.a)(i);function i(){return Object(y.a)(this,i),e.apply(this,arguments)}return Object(N.a)(i,[{key:"index",value:function(t,e){return this.domNode===t||this.domNode.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(e,1):-1}},{key:"position",value:function(t,e){var i=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return t>0&&(i+=1),[this.parent.domNode,i]}},{key:"value",value:function(){return Object(c.a)({},this.statics.blotName,this.statics.value(this.domNode)||!0)}}],[{key:"value",value:function(t){return!0}}]),i}(g);E.scope=r.INLINE_BLOT;var w=E,C=function(){function t(e,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(y.a)(this,t),this.attrName=e,this.keyName=i;var a=r.TYPE&r.ATTRIBUTE;this.scope=null!=n.scope?n.scope&r.LEVEL|a:r.ATTRIBUTE,null!=n.whitelist&&(this.whitelist=n.whitelist)}return Object(N.a)(t,[{key:"add",value:function(t,e){return!!this.canAdd(t,e)&&(t.setAttribute(this.keyName,e),!0)}},{key:"canAdd",value:function(t,e){return null==this.whitelist||("string"==typeof e?this.whitelist.indexOf(e.replace(/["']/g,""))>-1:this.whitelist.indexOf(e)>-1)}},{key:"remove",value:function(t){t.removeAttribute(this.keyName)}},{key:"value",value:function(t){var e=t.getAttribute(this.keyName);return this.canAdd(t,e)&&e?e:""}}],[{key:"keys",value:function(t){return Array.from(t.attributes).map((function(t){return t.name}))}}]),t}();function T(t,e){return(t.getAttribute("class")||"").split(/\s+/).filter((function(t){return 0===t.indexOf("".concat(e,"-"))}))}var L=function(t){Object(f.a)(i,t);var e=Object(p.a)(i);function i(){return Object(y.a)(this,i),e.apply(this,arguments)}return Object(N.a)(i,[{key:"add",value:function(t,e){return!!this.canAdd(t,e)&&(this.remove(t),t.classList.add("".concat(this.keyName,"-").concat(e)),!0)}},{key:"remove",value:function(t){T(t,this.keyName).forEach((function(e){t.classList.remove(e)})),0===t.classList.length&&t.removeAttribute("class")}},{key:"value",value:function(t){var e=(T(t,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(t,e)?e:""}}],[{key:"keys",value:function(t){return(t.getAttribute("class")||"").split(/\s+/).map((function(t){return t.split("-").slice(0,-1).join("-")}))}}]),i}(C);function B(t){var e=t.split("-"),i=e.slice(1).map((function(t){return t[0].toUpperCase()+t.slice(1)})).join("");return e[0]+i}var I=function(t){Object(f.a)(i,t);var e=Object(p.a)(i);function i(){return Object(y.a)(this,i),e.apply(this,arguments)}return Object(N.a)(i,[{key:"add",value:function(t,e){return!!this.canAdd(t,e)&&(t.style[B(this.keyName)]=e,!0)}},{key:"remove",value:function(t){t.style[B(this.keyName)]="",t.getAttribute("style")||t.removeAttribute("style")}},{key:"value",value:function(t){var e=t.style[B(this.keyName)];return this.canAdd(t,e)?e:""}}],[{key:"keys",value:function(t){return(t.getAttribute("style")||"").split(";").map((function(t){return t.split(":")[0].trim()}))}}]),i}(C),_=function(){function t(e){Object(y.a)(this,t),this.attributes={},this.domNode=e,this.build()}return Object(N.a)(t,[{key:"attribute",value:function(t,e){e?t.add(this.domNode,e)&&(null!=t.value(this.domNode)?this.attributes[t.attrName]=t:delete this.attributes[t.attrName]):(t.remove(this.domNode),delete this.attributes[t.attrName])}},{key:"build",value:function(){var t=this;this.attributes={};var e=s.find(this.domNode);if(null!=e){var i=C.keys(this.domNode),n=L.keys(this.domNode),a=I.keys(this.domNode);i.concat(n).concat(a).forEach((function(i){var n=e.scroll.query(i,r.ATTRIBUTE);n instanceof C&&(t.attributes[n.attrName]=n)}))}}},{key:"copy",value:function(t){var e=this;Object.keys(this.attributes).forEach((function(i){var n=e.attributes[i].value(e.domNode);t.format(i,n)}))}},{key:"move",value:function(t){var e=this;this.copy(t),Object.keys(this.attributes).forEach((function(t){e.attributes[t].remove(e.domNode)})),this.attributes={}}},{key:"values",value:function(){var t=this;return Object.keys(this.attributes).reduce((function(e,i){return e[i]=t.attributes[i].value(t.domNode),e}),{})}}]),t}(),S=function(t){Object(f.a)(i,t);var e=Object(p.a)(i);function i(t,n){var r;return Object(y.a)(this,i),(r=e.call(this,t,n)).attributes=new _(r.domNode),r}return Object(N.a)(i,[{key:"format",value:function(t,e){var n=this;if(t!==this.statics.blotName||e){var a=this.scroll.query(t,r.INLINE);if(null==a)return;a instanceof C?this.attributes.attribute(a,e):!e||t===this.statics.blotName&&this.formats()[t]===e||this.replaceWith(t,e)}else this.children.forEach((function(t){t instanceof i||(t=t.wrap(i.blotName,!0)),n.attributes.copy(t)})),this.unwrap()}},{key:"formats",value:function(){var t=this.attributes.values(),e=this.statics.formats(this.domNode,this.scroll);return null!=e&&(t[this.statics.blotName]=e),t}},{key:"formatAt",value:function(t,e,n,a){null!=this.formats()[n]||this.scroll.query(n,r.ATTRIBUTE)?this.isolate(t,e).format(n,a):Object(h.a)(Object(d.a)(i.prototype),"formatAt",this).call(this,t,e,n,a)}},{key:"optimize",value:function(t){Object(h.a)(Object(d.a)(i.prototype),"optimize",this).call(this,t);var e=this.formats();if(0===Object.keys(e).length)return this.unwrap();var n=this.next;n instanceof i&&n.prev===this&&function(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var i in t)if(t[i]!==e[i])return!1;return!0}(e,n.formats())&&(n.moveChildren(this),n.remove())}},{key:"replaceWith",value:function(t,e){var n=Object(h.a)(Object(d.a)(i.prototype),"replaceWith",this).call(this,t,e);return this.attributes.copy(n),n}},{key:"update",value:function(t,e){var n=this;Object(h.a)(Object(d.a)(i.prototype),"update",this).call(this,t,e),t.some((function(t){return t.target===n.domNode&&"attributes"===t.type}))&&this.attributes.build()}},{key:"wrap",value:function(t,e){var n=Object(h.a)(Object(d.a)(i.prototype),"wrap",this).call(this,t,e);return n instanceof i&&this.attributes.move(n),n}}],[{key:"formats",value:function(t,e){var n=e.query(i.blotName);if(null==n||t.tagName!==n.tagName)return"string"==typeof this.tagName||(Array.isArray(this.tagName)?t.tagName.toLowerCase():void 0)}}]),i}(j);S.allowedChildren=[S,w],S.blotName="inline",S.scope=r.INLINE_BLOT,S.tagName="SPAN";var q=S,D=function(t){Object(f.a)(i,t);var e=Object(p.a)(i);function i(t,n){var r;return Object(y.a)(this,i),(r=e.call(this,t,n)).attributes=new _(r.domNode),r}return Object(N.a)(i,[{key:"format",value:function(t,e){var n=this.scroll.query(t,r.BLOCK);null!=n&&(n instanceof C?this.attributes.attribute(n,e):t!==this.statics.blotName||e?!e||t===this.statics.blotName&&this.formats()[t]===e||this.replaceWith(t,e):this.replaceWith(i.blotName))}},{key:"formats",value:function(){var t=this.attributes.values(),e=this.statics.formats(this.domNode,this.scroll);return null!=e&&(t[this.statics.blotName]=e),t}},{key:"formatAt",value:function(t,e,n,a){null!=this.scroll.query(n,r.BLOCK)?this.format(n,a):Object(h.a)(Object(d.a)(i.prototype),"formatAt",this).call(this,t,e,n,a)}},{key:"insertAt",value:function(t,e,n){if(null==n||null!=this.scroll.query(e,r.INLINE))Object(h.a)(Object(d.a)(i.prototype),"insertAt",this).call(this,t,e,n);else{var a=this.split(t);if(null==a)throw new Error("Attempt to insertAt after block boundaries");var o=this.scroll.create(e,n);a.parent.insertBefore(o,a)}}},{key:"replaceWith",value:function(t,e){var n=Object(h.a)(Object(d.a)(i.prototype),"replaceWith",this).call(this,t,e);return this.attributes.copy(n),n}},{key:"update",value:function(t,e){var n=this;Object(h.a)(Object(d.a)(i.prototype),"update",this).call(this,t,e),t.some((function(t){return t.target===n.domNode&&"attributes"===t.type}))&&this.attributes.build()}}],[{key:"formats",value:function(t,e){var n=e.query(i.blotName);if(null==n||t.tagName!==n.tagName)return"string"==typeof this.tagName||(Array.isArray(this.tagName)?t.tagName.toLowerCase():void 0)}}]),i}(j);D.blotName="block",D.scope=r.BLOCK_BLOT,D.tagName="P",D.allowedChildren=[q,D,w];var M=D,P=function(t){Object(f.a)(i,t);var e=Object(p.a)(i);function i(){return Object(y.a)(this,i),e.apply(this,arguments)}return Object(N.a)(i,[{key:"format",value:function(t,e){Object(h.a)(Object(d.a)(i.prototype),"formatAt",this).call(this,0,this.length(),t,e)}},{key:"formatAt",value:function(t,e,n,r){0===t&&e===this.length()?this.format(n,r):Object(h.a)(Object(d.a)(i.prototype),"formatAt",this).call(this,t,e,n,r)}},{key:"formats",value:function(){return this.statics.formats(this.domNode,this.scroll)}}],[{key:"formats",value:function(t,e){}}]),i}(w),U={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},R=function(t){Object(f.a)(i,t);var e=Object(p.a)(i);function i(t,n){var r;return Object(y.a)(this,i),(r=e.call(this,null,n)).registry=t,r.scroll=Object(u.a)(r),r.build(),r.observer=new MutationObserver((function(t){r.update(t)})),r.observer.observe(r.domNode,U),r.attach(),r}return Object(N.a)(i,[{key:"create",value:function(t,e){return this.registry.create(this,t,e)}},{key:"find",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.registry.find(t,e)}},{key:"query",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.ANY;return this.registry.query(t,e)}},{key:"register",value:function(){var t;return(t=this.registry).register.apply(t,arguments)}},{key:"build",value:function(){null!=this.scroll&&Object(h.a)(Object(d.a)(i.prototype),"build",this).call(this)}},{key:"detach",value:function(){Object(h.a)(Object(d.a)(i.prototype),"detach",this).call(this),this.observer.disconnect()}},{key:"deleteAt",value:function(t,e){this.update(),0===t&&e===this.length()?this.children.forEach((function(t){t.remove()})):Object(h.a)(Object(d.a)(i.prototype),"deleteAt",this).call(this,t,e)}},{key:"formatAt",value:function(t,e,n,r){this.update(),Object(h.a)(Object(d.a)(i.prototype),"formatAt",this).call(this,t,e,n,r)}},{key:"insertAt",value:function(t,e,n){this.update(),Object(h.a)(Object(d.a)(i.prototype),"insertAt",this).call(this,t,e,n)}},{key:"optimize",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(h.a)(Object(d.a)(i.prototype),"optimize",this).call(this,n);for(var r=n.mutationsMap||new WeakMap,a=Array.from(this.observer.takeRecords());a.length>0;)e.push(a.pop());for(var o=function e(i){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null!=i&&i!==t&&null!=i.domNode.parentNode&&(r.has(i.domNode)||r.set(i.domNode,[]),n&&e(i.parent))},s=function t(e){r.has(e.domNode)&&(e instanceof j&&e.children.forEach(t),r.delete(e.domNode),e.optimize(n))},l=e,u=0;l.length>0;u+=1){if(u>=100)throw new Error("[Parchment] Maximum optimize iterations reached");for(l.forEach((function(e){var i=t.find(e.target,!0);null!=i&&(i.domNode===e.target&&("childList"===e.type?(o(t.find(e.previousSibling,!1)),Array.from(e.addedNodes).forEach((function(e){var i=t.find(e,!1);o(i,!1),i instanceof j&&i.children.forEach((function(t){o(t,!1)}))}))):"attributes"===e.type&&o(i.prev)),o(i))})),this.children.forEach(s),a=(l=Array.from(this.observer.takeRecords())).slice();a.length>0;)e.push(a.pop())}}},{key:"update",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=t||this.observer.takeRecords();var r=new WeakMap;t.map((function(t){var e=s.find(t.target,!0);return null==e?null:r.has(e.domNode)?(r.get(e.domNode).push(t),null):(r.set(e.domNode,[t]),e)})).forEach((function(t){null!=t&&t!==e&&r.has(t.domNode)&&t.update(r.get(t.domNode)||[],n)})),n.mutationsMap=r,r.has(this.domNode)&&Object(h.a)(Object(d.a)(i.prototype),"update",this).call(this,r.get(this.domNode),n),this.optimize(t,n)}}]),i}(j);R.blotName="scroll",R.defaultChild=M,R.allowedChildren=[M,x],R.scope=r.BLOCK_BLOT,R.tagName="DIV";var z=R,W=function(t){Object(f.a)(i,t);var e=Object(p.a)(i);function i(t,n){var r;return Object(y.a)(this,i),(r=e.call(this,t,n)).text=r.statics.value(r.domNode),r}return Object(N.a)(i,[{key:"deleteAt",value:function(t,e){this.domNode.data=this.text=this.text.slice(0,t)+this.text.slice(t+e)}},{key:"index",value:function(t,e){return this.domNode===t?e:-1}},{key:"insertAt",value:function(t,e,n){null==n?(this.text=this.text.slice(0,t)+e+this.text.slice(t),this.domNode.data=this.text):Object(h.a)(Object(d.a)(i.prototype),"insertAt",this).call(this,t,e,n)}},{key:"length",value:function(){return this.text.length}},{key:"optimize",value:function(t){Object(h.a)(Object(d.a)(i.prototype),"optimize",this).call(this,t),this.text=this.statics.value(this.domNode),0===this.text.length?this.remove():this.next instanceof i&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}},{key:"position",value:function(t){return[this.domNode,t]}},{key:"split",value:function(t){if(!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])){if(0===t)return this;if(t===this.length())return this.next}var e=this.scroll.create(this.domNode.splitText(t));return this.parent.insertBefore(e,this.next||void 0),this.text=this.statics.value(this.domNode),e}},{key:"update",value:function(t,e){var i=this;t.some((function(t){return"characterData"===t.type&&t.target===i.domNode}))&&(this.text=this.statics.value(this.domNode))}},{key:"value",value:function(){return this.text}}],[{key:"create",value:function(t){return document.createTextNode(t)}},{key:"value",value:function(t){return t.data}}]),i}(w);W.blotName="text",W.scope=r.INLINE_BLOT;var K=W}])})),A=(k=j)&&k.__esModule&&Object.prototype.hasOwnProperty.call(k,"default")?k.default:k;j.Parchment;var x=function(t){Object(f.a)(i,t);var e=Object(p.a)(i);function i(){return Object(y.a)(this,i),e.apply(this,arguments)}return Object(N.a)(i,null,[{key:"create",value:function(t){var e=Object(h.a)(Object(d.a)(i),"create",this).call(this,t),n=document.createElement("img");return n.setAttribute("src",t),e.appendChild(n),e.setAttribute("data-src",t),e}},{key:"value",value:function(t){return t.getAttribute("data-src")||""}}]),i}(A.EmbedBlot);x.blotName="loading-iamge",x.className="ql-image-uploading",x.tagName="SECTION";var E,w=function(t){return new Promise((function(e,i){var n=new Image;n.crossOrigin="anonymous",n.src=t,n.onload=function(){e(n)},n.onerror=i}))},C=function(t,e){var i=e.text,n=void 0===i?"":i,r=e.x,a=void 0===r?0:r,o=e.y,s=void 0===o?0:o,l=e.font,u=void 0===l?"24px serif":l,c=e.fillStyle,h=void 0===c?"red":c,d=e.imgAlpha,f=void 0===d?1:d,p=e.textAlpha,v=void 0===p?1:p,m=e.textAlign,b=void 0===m?"center":m;return new Promise((function(e,i){t||i();var r=document.createElement("canvas");r.width=t.width,r.height=t.height;var o=r.getContext("2d");o&&(o.globalAlpha=f,o.drawImage(t,0,0,r.width,r.height),o.save(),n&&(o.globalAlpha=v,o.font=u,o.fillStyle=h,o.textAlign=b,o.fillText(n,a||r.width/2,s||r.height/2)),r.toBlob((function(t){return e(t)})))}))},T=function(t){if("undefined"===t.insert||"string"===typeof t.insert)return!1;var e=t.insert;return"string"===typeof(e.image||e["loading-iamge"])},L=function(t){if("object"===typeof t.insert){var e=t.insert;return e.image||e["loading-iamge"]||""}return""},B=function(t){return/^data:image\/.+;base64/.test(t)},I=function t(e,i){Object(y.a)(this,t),this.quill=e,this.options=i};!function(t){t.LOADING="loading",t.SUCCESS="success",t.ERROR="error"}(E||(E={}));var _=O.a.import("delta");O.a.register({"formats/loading-image":x},!0);var S=function(t){Object(f.a)(i,t);var e=Object(p.a)(i);function i(t,n){var r;return Object(y.a)(this,i),(r=e.call(this,t,n)).altMap=new Map,r.urlMap=new Map,r.quill=t,r.options=n,r.handleDrop=r.handleDrop.bind(Object(u.a)(r)),r.handlePaste=r.handlePaste.bind(Object(u.a)(r)),r.quill.root.addEventListener("drop",r.handleDrop,!1),r.quill.root.addEventListener("paste",r.handlePaste,!1),r.injectUploaderHandler(),r}return Object(N.a)(i,[{key:"injectUploaderHandler",value:function(){var t=this;this.quill.getModule("uploader").options.handler=function(e,i){var n=i.map(t.options.upload);Promise.all(n).then((function(i){var n=i.reduce((function(t,e){return t.insert({image:e})}),(new _).retain(e.index).delete(e.length));t.quill.updateContents(n,"user"),t.quill.setSelection(e.index+i.length,0,"silent")}))}}},{key:"handleDrop",value:function(t){}},{key:"handlePaste",value:function(t){t.clipboardData&&t.clipboardData.types.includes("text/html")&&!t.clipboardData.types.includes("Files")&&this.restoreImages()}},{key:"shouldImageRestore",value:function(t){var e=this.options.imageDomainAllowList||[window.location.hostname];if(B(t))return!0;var i=new URL(t).hostname;return!e.includes(i)}},{key:"restoreImage",value:function(){var t=Object(l.a)(s.a.mark((function t(e){var i,n,r,a,o,l;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=L(e),this.shouldImageRestore(i)){t.next=3;break}return t.abrupt("return");case 3:if(t.prev=3,n=B(i)?w(i):this.quill.root.querySelector('img[src="'.concat(i,'"]'))){t.next=8;break}return console.warn("Can not read img element of url: %s",i),t.abrupt("return");case 8:if(r=e.attributes,this.altMap.set(i,(null===r||void 0===r?void 0:r.alt)||""),"string"!==typeof(a=this.urlMap.get(i))){t.next=14;break}return this.modifyImageDelta(i,a,E.SUCCESS),t.abrupt("return");case 14:return this.modifyImageDelta(i,"",E.LOADING),t.next=17,C(n,{});case 17:return o=t.sent,t.next=20,this.options.upload(o);case 20:l=t.sent,this.urlMap.set(i,l),this.modifyImageDelta(i,l,E.SUCCESS),t.next=29;break;case 25:t.prev=25,t.t0=t.catch(3),console.warn(t.t0),this.modifyImageDelta(i,"",E.ERROR);case 29:case"end":return t.stop()}}),t,this,[[3,25]])})));return function(e){return t.apply(this,arguments)}}()},{key:"restoreImages",value:function(){for(var t=this.quill.getContents(),e=0;e<t.ops.length;e+=1){var i=t.ops[e];T(i)&&this.restoreImage(i)}}},{key:"modifyImageDelta",value:function(){var t=Object(l.a)(s.a.mark((function t(e,i,n){var r,a,o,l,u,c,h;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=this.quill.getContents(),a=r.ops.findIndex((function(t){return T(t)&&L(t)===e})),o=r.ops[a]||{},l=o.attributes,u=n===E.SUCCESS?this.altMap.get(e):n,c={attributes:Object.assign(Object.assign({},l||{}),{alt:u}),insert:{image:i||e}},h=new _([].concat(Object(b.a)(r.ops.slice(0,a)),[c],Object(b.a)(r.ops.slice(a+1)))),this.quill.setContents(h,"api");case 7:case"end":return t.stop()}}),t,this)})));return function(e,i,n){return t.apply(this,arguments)}}()}]),i}(I),q=i(18),D=i.n(q),M=(i(28),i(29),i(6));D.a.register("modules/imageDropAndPaste",S);var P=function(t){return new Promise((function(t){setTimeout((function(){return t("https://cdn.nlark.com/yuque/0/2021/jpeg/103147/1637414393290-33a1c232-f002-44ab-b52b-c2f61d193965.jpeg?x-oss-process=image%2Fresize%2Cw_750%2Climit_0")}),5e3)}))},U=function(t){var e=Object(n.useRef)();return Object(n.useEffect)((function(){if(!e.current){var t=new D.a("#editor-container",{modules:{toolbar:[["bold","italic"],["link","image"]],imageDropAndPaste:{upload:P,imageDomainAllowList:["cdn.nlark.com"]},history:{userOnly:!0}},placeholder:"Copy & paste, or drag an image here...",readOnly:!1,theme:"snow"});e.current=t}}),[]),Object(M.jsxs)("div",{className:"App",style:{width:960,margin:"auto"},children:[Object(M.jsx)("h1",{children:"React Example"}),Object(M.jsxs)("p",{children:["Back to ",Object(M.jsx)("a",{href:"https://github.com/x-cold/quill2-image-drop-and-paste",children:"homepage"})," of quill2-image-drop-and-paste"]}),Object(M.jsx)("div",{id:"editor-container",style:{height:"640px"}}),Object(M.jsxs)("p",{children:["The image uploader is mocked function, and the image url will consistently change to: ",Object(M.jsx)("br",{})," 'https://cdn.nlark.com/yuque/0/2021/jpeg/103147/1637414393290-33a1c232-f002-44ab-b52b-c2f61d193965.jpeg?x-oss-process=image%2Fresize%2Cw_750%2Climit_0'"]})]})};a.a.render(Object(M.jsx)(U,{}),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.9b2dca55.chunk.js.map